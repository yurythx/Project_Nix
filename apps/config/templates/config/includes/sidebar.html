{% load config_extras %}

<!-- Sidebar Navigation Otimizada -->
<nav class="position-sticky pt-3" role="navigation" aria-label="Menu de configurações">
    <!-- Dashboard -->
    <div class="sidebar-section">
        <ul class="sidebar-nav">
            {% sidebar_item 'dashboard' 'fas fa-tachometer-alt' 'Dashboard' 'Dashboard principal com métricas do sistema' %}
        </ul>
    </div>

    <!-- Gerenciamento de Usuários -->
    <div class="sidebar-section">
        {% get_config_stats as stats %}
        <h6 class="sidebar-heading">
            <span><i class="fas fa-users config-icon"></i>Usuários & Permissões</span>
            <span class="config-badge config-badge-success">{{ stats.active_users }}/{{ stats.total_users }}</span>
        </h6>
        <ul class="sidebar-nav">
            {% sidebar_item 'user_list' 'fas fa-users' 'Gerenciar Usuários' 'Visualizar e gerenciar todos os usuários' %}
            {% sidebar_item 'user_create' 'fas fa-user-plus' 'Novo Usuário' 'Criar novo usuário no sistema' %}
        </ul>
    </div>

    <!-- Configurações de Email -->
    <div class="sidebar-section">
        <h6 class="sidebar-heading">
            <span><i class="fas fa-envelope config-icon"></i>Email</span>
            <span class="config-badge config-badge-info">{{ stats.email_configs }}</span>
        </h6>
        <ul class="sidebar-nav">
            {% sidebar_item 'email_config' 'fas fa-cog' 'Configurações' 'Configurar servidor de email' %}
            {% sidebar_item 'email_test' 'fas fa-paper-plane' 'Teste de Envio' 'Testar envio de emails' %}
        </ul>
    </div>

    <!-- Módulos do Sistema -->
    <div class="sidebar-section">
        <h6 class="sidebar-heading">
            <span><i class="fas fa-puzzle-piece config-icon"></i>Módulos</span>
            <span class="config-badge config-badge-success">{{ stats.active_modules }}/{{ stats.total_modules }}</span>
        </h6>
        <ul class="sidebar-nav">
            {% sidebar_item 'module_list' 'fas fa-cubes' 'Gerenciar Módulos' 'Configurar e testar módulos do sistema' %}
        </ul>
    </div>

    <!-- Backup & Restauração -->
    <div class="sidebar-section">
        <h6 class="sidebar-heading">
            <span><i class="fas fa-database config-icon"></i>Backup & Restauração</span>
        </h6>
        <ul class="sidebar-nav">
            {% sidebar_item 'backup_database' 'fas fa-database' 'Backup Banco' 'Backup do banco de dados' %}
            {% sidebar_item 'backup_media' 'fas fa-folder-open' 'Backup Mídia' 'Backup da mídia do site' %}
        </ul>
    </div>

    <!-- Moderação de Comentários -->
    {% if request.user.is_staff or request.user.is_superuser %}
    <div class="sidebar-section">
        <h6 class="sidebar-heading">
            <span><i class="fas fa-comments config-icon"></i>Comentários</span>
        </h6>
        <ul class="sidebar-nav">
            {% sidebar_item 'comment_moderation' 'fas fa-shield-alt' 'Moderação de Comentários' 'Moderar comentários do site' %}
        </ul>
    </div>
    {% endif %}
</nav>
