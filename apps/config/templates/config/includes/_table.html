{# Tabela acess√≠vel e DRY para listagens. Fallback seguro para headers/rows vazios. #}
<table class="config-table" role="table" aria-describedby="{{ caption|default:'Tabela de dados'|slugify }}-caption">
    {% if caption %}
        <caption id="{{ caption|slugify }}-caption" class="visually-hidden">{{ caption }}</caption>
    {% endif %}
    <thead class="config-table-header">
        <tr>
            {% if headers %}
                {% for header in headers %}
                    <th scope="col">{{ header.label }}</th>
                {% endfor %}
            {% else %}
                <th scope="col">Coluna 1</th>
            {% endif %}
        </tr>
    </thead>
    <tbody>
        <tr><td colspan="99" style="color:red;">DEBUG: Renderizando linhas da tabela ({{ rows|length }})</td></tr>
        {% if rows %}
            {% for row in rows %}
                <tr class="config-table-row" tabindex="0">
                    {% for cell in row %}
                        <td class="config-table-cell">{{ cell|safe }}</td>
                    {% endfor %}
                </tr>
            {% empty %}
                <tr class="config-table-row">
                    <td colspan="{{ headers|length|default:1 }}" class="config-table-cell config-table-empty">Nenhum dado encontrado.</td>
                </tr>
            {% endfor %}
        {% else %}
            <tr class="config-table-row">
                <td colspan="{{ headers|length|default:1 }}" class="config-table-cell config-table-empty">Nenhum dado encontrado.</td>
            </tr>
        {% endif %}
    </tbody>
</table>